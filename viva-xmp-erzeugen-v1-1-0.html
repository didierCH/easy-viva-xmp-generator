<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Easy Viva XMP-Generator</title>
    <!--[if lt IE 9]><script src="/static/script/html5shiv.js"></script><![endif]-->
    <style>
    * {box-sizing: border-box;}
    h1, h2, h3, p, label, input, select, button, option {font-family: arial, sans-serif;}
    h1 {font-size: 24px; margin-bottom: 0;}
    h2 {font-size: 19.2px; font-weight: normal;}
    h3 {font-size: 19.2px;}
    label {display: inline-block; width: 176px; padding: 3.2px 0px;}
    input {height: 22px; width: 293px; border: none; background-color: #3cbc8d; padding: 4px;}
    select {height: 22px; width: 293px; display: inline-block; border: none; background-color: #3cbc8d;}
    button {display: inline-block; border: none; background-color: #3cbc8d; padding: 4px;}
    option {padding: 4px;}
    pre {background-color: #d9d9d9; padding: 8px; min-height: 235px; width: 100%; margin: 0px;}
    span {font-weight: bold; color: red;}
    textarea {width: 100%; border-radius: 0px; border: 1px solid #000; margin: 32px 0px 16px 0px;}
    #wrapper {background-color: #f1f1f1; overflow: hidden; padding: 8px; width: 1100px;}
    #buttonFormularErstellen {float: right;}
    #xmlHead label {width: 172.8px;}
    #formWrapper {width: 472px; float: left; margin-right: 8px;}
    #xmlAusgabe {float: left; width: 600px;}
    #buttonXMPdateiErstellen {border: 2px solid #000; height: 30px; width: 200px; font-weight: bold; margin-top: 32px;}
    #version {font-size: 10.4px; float: right;}
    </style>
<head>
<body>
    <div id="wrapper">
    <h1>Easy Viva XMP-Generator</h1>
    <h2>Mit diesem Programm können Viva-XMP Daten für den Formularmodus des Printplus Druckportal erzeugt werden.</h2>
    <hr>
    <div id="formWrapper">
    <!-- <p>Geben Sie hier Ihre Informationen ein</p> -->
    <div id="headInfo">
    <form id="xmlHead">
    <h3>Head Informationen</h3>
        <label>viva:title: </label> <input type="text" id="inputVivaTitle" value=""><br>
        <label>viva:liste: </label>
            <select id="inputVivaListe">
                <option value="1">Liste anzeigen</option>
                <option value="2">Liste nicht anzeigen</option>
            </select><br>
        <label>viva:previewWidth: </label> <input type="text" id="inputVivaPreviewWidth" value="680"><br>
        <label>viva:previewHeight: </label> <input type="text" id="inputVivaPreviewHeight" value=""><br>
        <label>viva:formWidth: </label> <input type="text" id="inputVivaFormWidth" value="500"><br>
        <label>viva:productDescription: </label> <input type="text" id="inputVivaProductDescription" value="" placeholder="$Name.Vorname$ $Name.Name$"><br>
    </form>
    <hr>
    </div>
    <div id="formularfelder">
    </div>
    <div>
        <h3>Neues Formularfeld hinzufügen</h3>
        <select id="newValueSortOf">
            <option value="text">Textfeld</option>
            <option value="hidden">Verstecktes Feld</option>
            <option value="email">E-Mail Feld</option>
            <option value="textarea">Mehrzeiliges Formularfeld</option>
            <option value="select">Auswahlliste</option>
        </select>
        <button id="buttonFormularErstellen" onclick="neuesFormularfeld()">Formularfeld hinzufügen</button>
    </div>

    <br>
    <br>
    <button id="buttonXMPdateiErstellen" onclick="elementeAbrufen()">XMP-Datei erstellen</button>
    <br>
    <br>
    </div> <!-- end of form-wrapper -->

    <div id="xmlAusgabe">
    <!-- <p>Clipboard für CSV-File zur Vorlage</p> -->
    <textarea placeholder="Clipboard ..." rows="3"></textarea>
    <h3>XMP-Datei:</h3>
    <pre id="ausgabefeld"></pre>
    <p id="version">V.1.1.0<br>02.08.2016</p>
    </div> <!-- end of xmlAusgabe -->
    </div> <!-- end of wrapper -->

<script type="text/javascript">

// III
// choose which form field you want to create
function neuesFormularfeld() {
    valueNF = document.getElementById("newValueSortOf").value;

    switch (valueNF) {
        case "text":
            var formClassName = "text"; // 1.
            var h3HeaderTitle = "Textfeld"; // 2.
            var inputFields = ["name", "default", "label"]; // 3. & 4. (wird auch für das Attribut name verwendet
            var inputValue = ["", "", ""]; // 5.
            break;
        case "hidden":
            var formClassName = "hidden";
            var h3HeaderTitle = "Verstecktes Feld";
            var inputFields = ["name", "default"];
            var inputValue = ["", ""]
            break;
        case "email":
            var formClassName = "email";
            var h3HeaderTitle = "E-Mail-Feld";
            var inputFields = ["name", "default", "label", "align"];
            var inputValue = ["", "", "", "left"];
            break;
        case "textarea":
            var formClassName = "textarea";
            var h3HeaderTitle = "Mehrzeiliges Formularfeld";
            var inputFields = ["name", "default", "textrows", "textchars", "label"];
            var inputValue = ["", "", "", "", ""];
            break;
        case "select":
            var formClassName = "select";
            var h3HeaderTitle = "Auswahlfeld";
            var inputFields = ["name", "title", "value", "title", "value", "label"];
            var inputValue = ["", "", "", "", "", ""];
            break;
        default:
            result = "text";
    }

    // create form-element
    var form = document.createElement("FORM");
        form.setAttribute("class", formClassName); // 1.

    // append new formelement with content to div formularfelder
    document.getElementById("formularfelder").appendChild(form);

    // create header element
    var header = document.createElement("h3");
        headerText = document.createTextNode(h3HeaderTitle); // 2.
        form.appendChild(header);
        header.appendChild(headerText);


    // create input field
    for (i = 0; i < inputFields.length; i++) {
        var inputLabel = document.createElement("label");
        var text = document.createTextNode("viva: " + inputFields[i]); // 3.
            form.appendChild(inputLabel);
            inputLabel.appendChild(text);
        var formName = document.createElement("input");
            formName.setAttribute("type", "text");
            formName.setAttribute("name", inputFields[i]); // 4.
            formName.setAttribute("value", inputValue[i]); // 5.
            form.appendChild(formName);
        var br = document.createElement("br");
            form.appendChild(br);
    }

    // append line after new created formelement
    var linie = document.createElement("hr");
    document.getElementById("formularfelder").appendChild(linie);
}

// IV
// Elemente abrufen
function elementeAbrufen() {
    var formAbrufen = document.getElementById("formularfelder").getElementsByTagName("form");
    var inputfieldText = "";
    var inputOutput = "";
    var formOutput = "";
    var lz2 = "&#32;&#32;";
    var lz4 = lz2 + lz2;
    var lz6 = lz2 + lz4;
    var lz8 = lz4 + lz4;

    // get head information
    var vivaTitle = document.getElementById("inputVivaTitle").value;
    var vivaListe = document.getElementById("inputVivaListe").value;
    var vivaPreviewWidth = document.getElementById("inputVivaPreviewWidth").value;
    var vivaPreviewHeight = document.getElementById("inputVivaPreviewHeight").value;
    var vivaFormWidth = document.getElementById("inputVivaFormWidth").value;
    var vivaProductDescription = document.getElementById("inputVivaProductDescription").value;

    // write head information
    var headText =
        "&lt;viva:form rdf:parseType=\"Resource\"&gt;<br>" +
        lz2 + "&lt;viva:title&gt;<span>" + vivaTitle + "</span>&lt/viva:title&gt;<br>" +
        lz2 + "&lt;viva:listeAnzeigen&gt;<span>" + vivaListe + "</span>&lt;/viva:listeAnzeigen&gt;<br>" +
        lz2 + "&lt;viva:previewWidth&gt;<span>" + vivaPreviewWidth + "</span>&lt/viva:previewWidth&gt;<br>" +
        lz2 + "&lt;viva:previewHeight&gt;<span>" + vivaPreviewHeight + "</span>&lt/viva:previewHeight&gt;<br>" +
        lz2 + "&lt;viva:formWidth&gt;<span>" + vivaFormWidth + "</span>&lt/viva:formWidth&gt;<br>" +
        lz2 + "&lt;viva:productDescription&gt;<span>" + vivaProductDescription + "</span>&lt/viva:productDescription&gt<br>" +
        lz2 + "&lt;rdf:value rdf:parseType=\"Resource\"&gt;<br>" +
        lz4 + "&lt;viva:fields&gt;<br>" +
        lz6 + "&lt;rdf:Seq&gt;<br>";

    // write xml-closing information
    var closingText =
        lz6 + "&lt;/rdf:Seq&gt;<br>" +
        lz4 + "&lt;/viva:fields&gt;<br>" +
        lz2 + "&lt;/rdf:value&gt;<br>" +
        "&lt;/viva:form&gt;";

    // loop through all user created form-fields
    for (i = 0; i < formAbrufen.length; i++) {
        var getClassName = formAbrufen[i].className;
        var inputAbrufen = formAbrufen[i].getElementsByTagName("input");

        // loop through all input-fields inside form-fields
        for (j = 0; j < inputAbrufen.length; j++) {
            var getInputNameValue = inputAbrufen[j].name;
            var getInputValue = inputAbrufen[j].value;
            var getClassNameForm = getClassName;
            //var zaehler = j++;

            // decide which function to use determined through class name
            switch (getInputNameValue) {
            case "name":
                var xmlVivaType = "name";
                break;
            case "default":
                var xmlVivaType = "default";
                break;
            case "label":
                var xmlVivaType = "label";
                break;
            default:
                var xmlVivaType = "Meine Form hat keine Klasse! <br>";
                break;
            }
            inputOutput += "input name: " + xmlVivaType + "<br>";

        }

        formOutput += "form name :" + getClassName + "<br>" + inputOutput; 
        
    }

        inputfieldText = formOutput;

    document.getElementById("ausgabefeld").innerHTML = headText + inputfieldText + closingText;
}


</script>



</body></html>
